<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>1. React和Vue | Seven&#39;s Blog</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="积跬步以至千里，积小流以成江海">
    
    <link rel="preload" href="/assets/css/0.styles.9a488dde.css" as="style"><link rel="preload" href="/assets/js/app.8fcb3c07.js" as="script"><link rel="preload" href="/assets/js/2.ea4b5fde.js" as="script"><link rel="preload" href="/assets/js/23.17047d1d.js" as="script"><link rel="preload" href="/assets/js/3.482fc7d1.js" as="script"><link rel="prefetch" href="/assets/js/10.ceaff0cb.js"><link rel="prefetch" href="/assets/js/11.602a1a57.js"><link rel="prefetch" href="/assets/js/12.7c9a3565.js"><link rel="prefetch" href="/assets/js/13.cb26c009.js"><link rel="prefetch" href="/assets/js/14.db9f58ed.js"><link rel="prefetch" href="/assets/js/15.c07f99aa.js"><link rel="prefetch" href="/assets/js/16.bbea5198.js"><link rel="prefetch" href="/assets/js/17.bd355204.js"><link rel="prefetch" href="/assets/js/18.069c6795.js"><link rel="prefetch" href="/assets/js/19.2d2f3f2c.js"><link rel="prefetch" href="/assets/js/20.4bf50484.js"><link rel="prefetch" href="/assets/js/21.1bfa4a30.js"><link rel="prefetch" href="/assets/js/22.9b54ca32.js"><link rel="prefetch" href="/assets/js/24.d36a307c.js"><link rel="prefetch" href="/assets/js/25.f5c553f3.js"><link rel="prefetch" href="/assets/js/26.cfb8865a.js"><link rel="prefetch" href="/assets/js/27.8d7291fd.js"><link rel="prefetch" href="/assets/js/28.ac3b40d5.js"><link rel="prefetch" href="/assets/js/29.d97a3e56.js"><link rel="prefetch" href="/assets/js/30.f58a4260.js"><link rel="prefetch" href="/assets/js/31.9294edd4.js"><link rel="prefetch" href="/assets/js/32.753d88bb.js"><link rel="prefetch" href="/assets/js/33.4259510b.js"><link rel="prefetch" href="/assets/js/34.767c2061.js"><link rel="prefetch" href="/assets/js/35.ee551374.js"><link rel="prefetch" href="/assets/js/36.67e65bf0.js"><link rel="prefetch" href="/assets/js/37.39a7a34a.js"><link rel="prefetch" href="/assets/js/4.6162bcf8.js"><link rel="prefetch" href="/assets/js/5.43fabd26.js"><link rel="prefetch" href="/assets/js/6.bfd296f5.js"><link rel="prefetch" href="/assets/js/7.da21fdf7.js"><link rel="prefetch" href="/assets/js/8.13301773.js"><link rel="prefetch" href="/assets/js/9.d46e2aae.js">
    <link rel="stylesheet" href="/assets/css/0.styles.9a488dde.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Seven's Blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/web/" class="nav-link router-link-active">
  web前端
</a></div><div class="nav-item"><a href="/utils/" class="nav-link">
  其他
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/web/" class="nav-link router-link-active">
  web前端
</a></div><div class="nav-item"><a href="/utils/" class="nav-link">
  其他
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>React</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/web/React/React基础.html" class="active sidebar-link">React基础</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/web/React/React基础.html#_1-react和vue" class="sidebar-link">1. React和Vue</a></li><li class="sidebar-sub-header"><a href="/web/React/React基础.html#_2-jsx" class="sidebar-link">2. JSX</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/web/React/React基础.html#_1-jsx介绍" class="sidebar-link">1. JSX介绍</a></li><li class="sidebar-sub-header"><a href="/web/React/React基础.html#_2-jsx基础" class="sidebar-link">2. JSX基础</a></li></ul></li><li class="sidebar-sub-header"><a href="/web/React/React基础.html#_3-渲染机制" class="sidebar-link">3. 渲染机制</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/web/React/React基础.html#_1-虚拟dom" class="sidebar-link">1. 虚拟DOM</a></li><li class="sidebar-sub-header"><a href="/web/React/React基础.html#_2-react渲染机制" class="sidebar-link">2. React渲染机制</a></li></ul></li><li class="sidebar-sub-header"><a href="/web/React/React基础.html#_4-组件基础" class="sidebar-link">4. 组件基础</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/web/React/React基础.html#_1-创建组件-函数组件和class组件" class="sidebar-link">1. 创建组件：函数组件和class组件</a></li><li class="sidebar-sub-header"><a href="/web/React/React基础.html#_2-使用组件-首字母大写" class="sidebar-link">2. 使用组件：首字母大写</a></li><li class="sidebar-sub-header"><a href="/web/React/React基础.html#_3-组件嵌套及构建可复用附件" class="sidebar-link">3. 组件嵌套及构建可复用附件</a></li><li class="sidebar-sub-header"><a href="/web/React/React基础.html#_4-props" class="sidebar-link">4. props</a></li><li class="sidebar-sub-header"><a href="/web/React/React基础.html#_5-事件处理" class="sidebar-link">5. 事件处理</a></li></ul></li><li class="sidebar-sub-header"><a href="/web/React/React基础.html#_5-state" class="sidebar-link">5. State</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/web/React/React基础.html#_1-class组件的构造函数-是唯一可以初始化-state-的地方" class="sidebar-link">1. class组件的构造函数 是唯一可以初始化 state 的地方</a></li><li class="sidebar-sub-header"><a href="/web/React/React基础.html#_2-setstate-是唯一修改-state-的方法" class="sidebar-link">2. setState() 是唯一修改 state 的方法</a></li><li class="sidebar-sub-header"><a href="/web/React/React基础.html#_3-setstate-是异步的" class="sidebar-link">3. setState() 是异步的</a></li><li class="sidebar-sub-header"><a href="/web/React/React基础.html#_4-向-setstate-传递一个函数解决异步问题" class="sidebar-link">4. 向 setState() 传递一个函数解决异步问题</a></li><li class="sidebar-sub-header"><a href="/web/React/React基础.html#_5-单向数据流" class="sidebar-link">5. 单向数据流</a></li></ul></li><li class="sidebar-sub-header"><a href="/web/React/React基础.html#_6-条件渲染" class="sidebar-link">6. 条件渲染</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/web/React/React基础.html#_1-与vue的差异" class="sidebar-link">1. 与Vue的差异</a></li><li class="sidebar-sub-header"><a href="/web/React/React基础.html#_2-使用判断语句进行条件渲染" class="sidebar-link">2. 使用判断语句进行条件渲染</a></li></ul></li><li class="sidebar-sub-header"><a href="/web/React/React基础.html#_7-列表渲染和key" class="sidebar-link">7. 列表渲染和key</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/web/React/React基础.html#_1-与vue的差异-2" class="sidebar-link">1. 与Vue的差异</a></li><li class="sidebar-sub-header"><a href="/web/React/React基础.html#_2-渲染列表组件" class="sidebar-link">2. 渲染列表组件</a></li><li class="sidebar-sub-header"><a href="/web/React/React基础.html#_3-key的就进原则和唯一原则" class="sidebar-link">3. key的就进原则和唯一原则</a></li></ul></li><li class="sidebar-sub-header"><a href="/web/React/React基础.html#_8-受控组件" class="sidebar-link">8. 受控组件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/web/React/React基础.html#_1-什么是受控组件" class="sidebar-link">1. 什么是受控组件</a></li><li class="sidebar-sub-header"><a href="/web/React/React基础.html#_2-vue构建受控组件" class="sidebar-link">2. Vue构建受控组件</a></li><li class="sidebar-sub-header"><a href="/web/React/React基础.html#_3-react构建受控组件" class="sidebar-link">3. React构建受控组件</a></li><li class="sidebar-sub-header"><a href="/web/React/React基础.html#_4-表单的其他受控组件" class="sidebar-link">4. 表单的其他受控组件</a></li><li class="sidebar-sub-header"><a href="/web/React/React基础.html#_5-构建受控组件的必要性" class="sidebar-link">5. 构建受控组件的必要性</a></li></ul></li><li class="sidebar-sub-header"><a href="/web/React/React基础.html#_9-状态提升" class="sidebar-link">9. 状态提升</a></li><li class="sidebar-sub-header"><a href="/web/React/React基础.html#_10-react中的slot-组合" class="sidebar-link">10. React中的slot-组合</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/web/React/React基础.html#_1-包含关系-默认插槽" class="sidebar-link">1. 包含关系（默认插槽）</a></li><li class="sidebar-sub-header"><a href="/web/React/React基础.html#_2-具名插槽" class="sidebar-link">2. 具名插槽</a></li></ul></li><li class="sidebar-sub-header"><a href="/web/React/React基础.html#_11-组件生命周期" class="sidebar-link">11. 组件生命周期</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/web/React/React基础.html#_1-定义-class-组件" class="sidebar-link">1. 定义 class 组件</a></li><li class="sidebar-sub-header"><a href="/web/React/React基础.html#_2-生命周期阶段" class="sidebar-link">2. 生命周期阶段</a></li></ul></li><li class="sidebar-sub-header"><a href="/web/React/React基础.html#_12-样式相关" class="sidebar-link">12. 样式相关</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/web/React/React基础.html#_1-为组件添加-class" class="sidebar-link">1. 为组件添加 class</a></li><li class="sidebar-sub-header"><a href="/web/React/React基础.html#_2-行内样式" class="sidebar-link">2. 行内样式</a></li></ul></li></ul></li><li><a href="/web/React/如何开发React应用.html" class="sidebar-link">如何开发React应用</a></li><li><a href="/web/React/Redux基础.html" class="sidebar-link">Redux基础</a></li><li><a href="/web/React/Redux进阶.html" class="sidebar-link">Redux进阶</a></li><li><a href="/web/React/从零开始实现一个Redux.html" class="sidebar-link">从零开始实现一个Redux</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>react-router</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>CSS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>UmiJS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Utils</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/web/Mobile.html" class="sidebar-link">Mobile</a></li><li><a href="/web/ElementUI.html" class="sidebar-link">ElementUI</a></li><li><a href="/web/FastMock.html" class="sidebar-link">fastmock</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>面试题</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="_1-react和vue"><a href="#_1-react和vue" class="header-anchor">#</a> 1. React和Vue</h2> <ol><li>构成组件的方式不同
<ul><li>Vue使用 <code>.vue</code> 单文件组件来创建组件，包括了HTML片段，也就是使用HTML模板语法来创建组件</li> <li>React的特点是函数式编程和<code>JSX</code>语法，所以可以通过一个函数来构建组件</li></ul></li> <li>分离关注点的形式不同
<ul><li>Vue使用单文件(<code>.vue</code>)组件，其中包含了HTML模板、js逻辑、css样式，将标记和逻辑分离到不同的部分，实现关注点分离</li> <li>React则认为渲染逻辑和其他UI逻辑是有内在耦合的，如UI的事件绑定，UI中展示准备好的数据，所以采用了将标记和逻辑存放在“组件”这种松散的耦合单元中，实现关注点分离。在JSX中可以实现JavaScript中的任何功能</li></ul></li> <li>语法的不同
<ul><li>Vue提供了大量的语法糖，例如：数据双向绑定<code>v-model</code>、事件绑定<code>v-on</code>、属性绑定<code>v-bind</code>、循环<code>v-for</code>、判断<code>v-if</code>等等，这样的好处是只用记忆即可，但是不易理解。</li> <li>React则使用了大量JS原生的语法，例如条件渲染和列表渲染以及JSX中事件的定义也更像原生事件，虽然看上去会复杂，但是代码逻辑会更直观明了。</li></ul></li></ol> <h2 id="_2-jsx"><a href="#_2-jsx" class="header-anchor">#</a> 2. JSX</h2> <h3 id="_1-jsx介绍"><a href="#_1-jsx介绍" class="header-anchor">#</a> 1. JSX介绍</h3> <p>React并没有像Vue一样提供大量的语法糖，JSX是其中之一，它实际是 <code>React.createElement(component,props,...children)</code> 函数的语法糖</p> <ol><li><strong>JSX就是 React 用来描述页面展示内容的元素</strong>，它是<code>JavaScript</code> 和 <code>XML</code> 的缩写，将二者进行了融合，可以在HTML中书写JS，也可以在JS逻辑中输出元素。其具有模板简单易用的特点，但是又具有JavaScript强大的功能。它实现了标记和逻辑的“共存”，不用人为的将二者分离到不同的文件或内容中，就能实现关注点分离。它写起来更像是在写原生的JS。</li> <li>使用JSX可以快速的使用HTML标签来生成虚拟DOM，例如：<div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>content<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  内容
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div>会被编译为：<div class="language-js extra-class"><pre class="language-js"><code>React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span>
  <span class="token string">&quot;div&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> className<span class="token operator">:</span> <span class="token string">&quot;content&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">&quot;内容&quot;</span>
<span class="token punctuation">)</span>
</code></pre></div></li></ol> <h3 id="_2-jsx基础"><a href="#_2-jsx基础" class="header-anchor">#</a> 2. JSX基础</h3> <p>由于JSX会被编译为 <code>React.createElement</code> 函数调用的形式，所以 React 库必须包含在JSX代码作用域内；也就是只要使用JSX语法了，必须先引入 React 库（所以在编写React组件的时候，第一件事是在顶部引入React：<code>import React from ‘react’;</code>）</p> <ol><li>JSX中的元素
<ul><li>元素应使用 <code>&lt;&gt;</code> 包裹；</li> <li>如果标签中没有内容，可以使用 <code>/&gt;</code> 单标签的形式来直接闭合（大部分的组件都可以这么做），如：<div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">const</span> imgElement <span class="token operator">=</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>path<span class="token punctuation">}</span></span><span class="token punctuation">/&gt;</span></span><span class="token punctuation">;</span>
</code></pre></div></li> <li>JSX 标签的第一部分指定了 React 元素的类型：
<ul><li>首字母大写，表示一个自定义组件，如：<code>&lt;App /&gt;</code>、<code>&lt;Item /&gt;</code>等；</li> <li>首字母小写，则表示普通的HTML元素，如：<code>&lt;div&gt;</code>、<code>&lt;ul&gt;</code>等；</li></ul></li></ul></li> <li>JSX中定义属性：
JSX在语法上更接近JS，而不是HTML，所以JSX中属性的名称，应使用 <code>camelCase</code>(小驼峰命名) 来定义，而不要使用 <code>kebab-case</code> 的方式，如：<code>className</code> 替代 <code>class</code>，<code>htmlFor</code>替代label标签的<code>for</code></li> <li>JSX中的<code>{}</code>：在JSX的<code>{}</code>中可以写入任意有效的<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Expressions_and_Operators" target="_blank" rel="noopener noreferrer">表达式<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>：
<ul><li>渲染数字</li> <li>渲染字符串</li> <li>渲染布尔值</li> <li>为元素绑定属性值</li> <li>渲染JSX元素
总之，JSX遇到<code>{}</code>就会按JS解析里面的内容</li></ul></li> <li>多行JSX元素只能有一个根节点，并且应使用 <code>()</code> 包裹：<div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">let</span> listArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'item1'</span><span class="token punctuation">,</span> <span class="token string">'item2'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> list <span class="token operator">=</span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token punctuation">{</span>
      listArr<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>item <span class="token operator">+</span> index<span class="token punctuation">}</span></span> 
            	<span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          	</span><span class="token punctuation">{</span>item<span class="token punctuation">}</span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
        <span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">)</span>
</code></pre></div></li> <li>JSX也是一个表达式，可以将其赋值给一个变量，作为一个返回值等操作，例如在<code>if</code> 语句和 <code>for</code> 循环语句中使用：<div class="language-jsx extra-class"><div class="highlight-lines"><br><br><div class="highlighted"> </div><br><div class="highlighted"> </div><br><br></div><pre class="language-jsx"><code><span class="token keyword">function</span> <span class="token function">demo</span><span class="token punctuation">(</span><span class="token parameter">user</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Hello, </span><span class="token punctuation">{</span>user<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Hello, React</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li>在JSX中甚至可以用点( <code>.</code> )语法<div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">React.Fragment</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button.Blue</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button.Red</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">React.Fragment</span></span><span class="token punctuation">/&gt;</span></span><span class="token plain-text">
</span></code></pre></div></li></ol> <div class="custom-block warning"><p class="custom-block-title">JSX使用注意</p> <ol><li>对于同一元素中的同一属性，要么使用<code>{}</code>表达式，要么使用字符串，不能同时混用</li> <li>自定义组件必须以大写字母开头，不论是命名还是引入</li> <li><code>if</code> 语句和 <code>for</code> 循环语句不属于JS表达式，因此不能直接在JSX中使用</li></ol></div> <h2 id="_3-渲染机制"><a href="#_3-渲染机制" class="header-anchor">#</a> 3. 渲染机制</h2> <h3 id="_1-虚拟dom"><a href="#_1-虚拟dom" class="header-anchor">#</a> 1. 虚拟DOM</h3> <p>所谓虚拟DOM，其实是一个JS对象。参考：<a href="https://www.zhihu.com/question/29504639/answer/609290611" target="_blank" rel="noopener noreferrer">如何理解虚拟DOM<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <ul><li>本质：使用JS对象来模拟浏览器中的DOM</li> <li>目的：实现页面元素的高效更新</li></ul> <h3 id="_2-react渲染机制"><a href="#_2-react渲染机制" class="header-anchor">#</a> 2. React渲染机制</h3> <ol><li>React同Vue一样使用了虚拟DOM，在React中通过 <code>React.createElement</code> 将JSX中的元素编译成类DOM的树状结构，在更新发生后，会存在两个virtualDOM，先通过diff算法比较两个对象之间的差异，然后只对有差异的节点进行更新。这里有两点，一是操作一个JS对象远比操作一个真实的DOM要快的多；二是只更新有差异的节点；从而达到提高性能的目的。</li> <li>React 元素渲染需要有一个根DOM，该节点内的所有内容都由 <code>React DOM</code> 管理</li> <li>需要使用 <code>ReactDOM.render()</code> 函数来进行渲染<div class="language-jsx extra-class"><div class="highlight-lines"><div class="highlighted"> </div><div class="highlighted"> </div><br><br><div class="highlighted"> </div><br></div><pre class="language-jsx"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> ReactDOM <span class="token keyword">from</span> <span class="token string">'react-dom'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> ele <span class="token operator">=</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Hello React</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span>
ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>ele<span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="custom-block warning"><p class="custom-block-title">注意</p> <ol><li>需要先引入 <code>React</code>（存在于每个单文件组件中） 和 <code>ReactDOM</code> （通常在根组件只引入一次）</li> <li>可以有多个根DOM</li> <li>需要使用 <code>ReactDOM.render()</code> 函数（通常在根组件只使用一次）</li></ol></div></li></ol> <h2 id="_4-组件基础"><a href="#_4-组件基础" class="header-anchor">#</a> 4. 组件基础</h2> <blockquote><p>组件，从概念上讲类似于 JavaScript 函数。它接收任意的入参（即“props”），并返回用于描述页面展示内容的 React 元素。</p></blockquote> <h3 id="_1-创建组件-函数组件和class组件"><a href="#_1-创建组件-函数组件和class组件" class="header-anchor">#</a> 1. 创建组件：函数组件和class组件</h3> <p>React中创建组件的方式有两种：<strong>函数组件</strong> 和 <strong>class组件</strong></p> <ol><li>函数组件<br>
创建函数组件的方式很简单，使用 <code>function</code> 关键字定义函数即可，它可以接受一个入参，即 <code>props</code> 从上层组件传递过来的数据；函数组件没有局部<code>state</code>（Hook可以），所以又称无状态组件<br>
注意：
<ul><li>函数名（即组件名）<strong>必须大写开头</strong></li> <li>函数必须<strong>显式的返回一个 <code>JSX元素</code> 或 <code>null</code></strong></li></ul> <div class="language-jsx extra-class"><div class="highlight-lines"><div class="highlighted"> </div><div class="highlighted"> </div><br><br></div><pre class="language-jsx"><code><span class="token keyword">function</span> <span class="token function">Hello</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 组件名首字母大写</span>
  <span class="token keyword">return</span> props<span class="token punctuation">.</span>flag <span class="token operator">?</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Hello, </span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span> <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// 必须显式的 return 一个jsx元素或者null</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li>class组件<br>
拥有更强大的功能，它可以拥有局部的 <code>state</code>，使用生命周期函数，修改状态等更丰富的功能。本节主要概述React创建组件的方式，详细的 class 组件说明参考:<a href="#class%E7%BB%84%E4%BB%B6%E8%BF%9B%E9%98%B6">class组件进阶</a><div class="language-jsx extra-class"><div class="highlight-lines"><br><div class="highlighted"> </div><br><br><br><div class="highlighted"> </div><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br></div><pre class="language-jsx"><code><span class="token keyword">class</span> <span class="token class-name">Hello</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 局部状态</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      age<span class="token operator">:</span> <span class="token number">18</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 生命周期函数</span>
  <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      age<span class="token operator">:</span><span class="token number">20</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Hello, </span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token plain-text">，my age is </span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>age<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ol> <div class="custom-block warning"><p class="custom-block-title">注意</p> <ol><li>定义组件时，组件名称必须以大写字母开头</li> <li>如果组件为单文件组件，必须在顶部引入 <code>React</code>：<code>import React from ‘react’</code></li> <li>只能有一个根元素</li></ol></div> <p>当 <code>()</code> 中有多行元素时，需要在最外层用一个元素包裹（这点同Vue类似）；可以使用内置的组件，来避免真实DOM更多嵌套，它不会渲染出真实DOM，如 <code>Fragment</code>；这类似Vue的 <code>template</code>、<code>keep-alive</code>等内置组件</p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><br><br><div class="highlighted"> </div><br><br><div class="highlighted"> </div><br><br><br><br></div><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Hello</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token punctuation">{</span><span class="token comment">/* 只能有一个根元素 */</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span>React<span class="token punctuation">.</span>Fragment<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>Hello<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>我是小明<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>React<span class="token punctuation">.</span>Fragment<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_2-使用组件-首字母大写"><a href="#_2-使用组件-首字母大写" class="header-anchor">#</a> 2. 使用组件：首字母大写</h3> <p>在JSX中使用首字母大写的方式，使用组件</p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><br><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br><br><br></div><pre class="language-js"><code><span class="token keyword">import</span> Hello <span class="token keyword">from</span> <span class="token string">'./Hello'</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">List</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Hello name<span class="token operator">=</span><span class="token string">'Seven'</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Hello name<span class="token operator">=</span><span class="token string">'React'</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="custom-block warning"><p class="custom-block-title">注意：组件名称必须以大写字母开头</p> <p>React 会将以小写字母开头的组件视为原生 DOM 标签。例如，<code>&lt;div /&gt;</code> 代表 HTML 的 div 标签，而 <code>&lt;Hello /&gt;</code> 则代表一个组件，并且需在作用域内使用 Welcome</p></div> <h3 id="_3-组件嵌套及构建可复用附件"><a href="#_3-组件嵌套及构建可复用附件" class="header-anchor">#</a> 3. 组件嵌套及构建可复用附件</h3> <p>React中的组件是可以嵌套的。在项目中，构建可复用组件库是必要且值得的，React中的组件可以拆分的更细，合理利用函数组件构建纯UI组件，然后结合class组件构建容器组件，能最大化组件的复用性，及项目的健壮性。</p> <h3 id="_4-props"><a href="#_4-props" class="header-anchor">#</a> 4. props</h3> <p>当元素为一个组件时，其属性即为 <code>props</code> ，可以通过这些 <code>props</code> 向子组件传值</p> <ol><li><code>props</code> 也可以使用表达式<div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>MyComponent number<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">1</span> <span class="token operator">+</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
</code></pre></div></li> <li><code>props</code> 使用字符串字面量<div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 下面两种都是等价的</span>
<span class="token operator">&lt;</span>MyComponent name<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'seven'</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>MyComponent name<span class="token operator">=</span><span class="token string">'seven'</span><span class="token operator">&gt;</span>
</code></pre></div></li> <li>合理使用展开运算符 <code>...</code><div class="language-js extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><div class="highlighted"> </div><br><br></div><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">App1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>MyComponent firstName<span class="token operator">=</span><span class="token string">'Xu'</span> lastName<span class="token operator">=</span><span class="token string">'Seven'</span><span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 上述情况等价于</span>
<span class="token keyword">function</span> <span class="token function">App2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>
  <span class="token keyword">const</span> props <span class="token operator">=</span> <span class="token punctuation">{</span> firstName<span class="token operator">:</span> <span class="token string">'Xu'</span><span class="token punctuation">,</span> lastName<span class="token operator">:</span> <span class="token string">'Seven'</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>MyComponent <span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><strong>注意：</strong> 属性展开很容易将不必要的 <code>props</code> 传递给不相关的组件，例如上例组件可能并不需要 <code>lastName</code> 属性；或者将无效的HTML属性传递给DOM。使用时需要谨慎。</li></ul></li> <li>进阶- <code>props</code> 传递函数<br>
可以通过 <code>{}</code> 向子组件 <code>props</code> 一个函数指针，在子组件中触发。因为 <code>props</code> 是只读的，所以可以通过这种方式在子组件中触发父组件的方法，进而修改父组件中的状态，从而改变 <code>props</code><div class="language-js extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br></div><pre class="language-js"><code><span class="token comment">// 子组件</span>
<span class="token keyword">class</span> <span class="token class-name">Child</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>handleChange <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">change</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">change</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> content <span class="token operator">=</span> <span class="token string">'我是child'</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">changeContent</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>React<span class="token punctuation">.</span>Fragment<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>content<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleChange<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>React<span class="token punctuation">.</span>Fragment<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 父组件</span>
<span class="token keyword">class</span> <span class="token class-name">Parent</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      content<span class="token operator">:</span> <span class="token string">'我是Parent'</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>handleChange <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">change</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">change</span><span class="token punctuation">(</span><span class="token parameter">cont</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      content<span class="token operator">:</span> cont
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>Child content<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>content<span class="token punctuation">}</span> changeContent<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleChange<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ol> <div class="custom-block warning"><p class="custom-block-title">注意： props 永远都是只读的</p> <p><code>props</code> 永远都是只读的，必须像纯函数一样确保 <code>props</code> 不被修改</p></div> <h3 id="_5-事件处理"><a href="#_5-事件处理" class="header-anchor">#</a> 5. 事件处理</h3> <p>与Vue提供了 <code>v-on</code> 语法糖来绑定事件不同，React元素的事件处理和DOM元素的原生事件很相似，只是语法上有稍微的不同：</p> <ul><li>事件名采用小驼峰（camelCase）命名，而不是纯小写。如：<code>onClick</code>、<code>onMouseMove</code></li> <li>使用 JSX 语法时需要传入一个函数名作为事件要处理的函数（所以一般需要进行<code>bind</code>），而不是像Vue中的传入一个字符串；</li> <li>不用显式的使用 <code>addEventListener()</code> 来为元素添加监听器</li></ul> <div class="language-html extra-class"><div class="highlight-lines"><br><br><br><br><br><div class="highlighted"> </div><br></div><pre class="language-html"><code><span class="token comment">&lt;!-- 原生的DOM事件 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>handleClick()<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>click<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- Vue中的事件处理 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>handleClick<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>click<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- React中的事件处理 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>{this.handleClick}</span><span class="token punctuation">&gt;</span></span>click<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ol><li>阻止默认事件<br>
原生DOM事件中可以 <code>return false</code> 来阻止事件的触发，与原生不同的是React中阻止默认事件必须显式的使用<code>preventDefault()</code> 来阻止默认事件。</li> <li>事件对象 <code>event</code> (通常简写为 <code>e</code>)<br>
在React中 <code>event</code> 是一个合成事件，React已经根据规范定义这些合成事件，所以完全可以当做 DOM 原生事件对象来使用。<div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- 原生DOM阻止连接跳转 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#<span class="token punctuation">&quot;</span></span> <span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>return false<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>link to<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-js extra-class"><div class="highlight-lines"><br><br><div class="highlighted"> </div><br><br><br><br><br><br></div><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">ActionLink</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">function</span> <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">&quot;#&quot;</span> onClick<span class="token operator">=</span><span class="token punctuation">{</span>handleClick<span class="token punctuation">}</span><span class="token operator">&gt;</span>link to<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li>处理class组件中的函数指针<br>
使用 class 来定义组件的时候，通常是将事件处理函数声明为 class 中的方法。<div class="language-js extra-class"><div class="highlight-lines"><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><br><br><br><br><br></div><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Button</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 为了在回调中使用 this ，则必须进行绑定</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>handleClick <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleClick</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 定义事件触发的函数</span>
  <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'Hello,Seven'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleClick<span class="token punctuation">}</span><span class="token operator">&gt;</span>click me<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ol> <div class="custom-block warning"><p class="custom-block-title">注意：必须谨慎对待JSX回调函数中的 this</p> <p>在JavaScript中，class的方法默认不会绑定 <code>this</code>。如果不进行绑定，则调用这个函数的时候 <code>this</code> 为 <code>undefined</code></p></div> <ul><li>class组件中处理函数 <code>this</code> 指针的四种方法:
<ol><li>使用 <code>bind()</code> 进行显式的绑定；<strong>推荐</strong> <ul><li>在 class 的构造函数，也就是 <code>constructor()</code> 函数中使用 <code>bind</code> 进行 <code>this</code> 绑定，如上；</li> <li>在事件回调中进行绑定，这种方式还可以额外的进行传参</li></ul> <div class="language-js extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br></div><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Button</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token comment">// 定义事件触发的函数</span>
  <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'Hello,Seven'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleClick</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>click me<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li>箭头函数的特点是 <code>this</code> 总是指向其定义时的作用域，所以可以使用箭头函数来绑定 <code>this</code> <ul><li>在声明函数时，直接使用箭头函数；<strong>推荐</strong><div class="language-js extra-class"><div class="highlight-lines"><br><br><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br><br><br><br><br><br></div><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Button</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token comment">// 定义事件触发的函数</span>
  <span class="token function-variable function">handleClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'Hello,Seven'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleClick<span class="token punctuation">}</span><span class="token operator">&gt;</span>click me<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li>在事件的回调中使用箭头函数<br>
通过该方式作为prop传入子组件时，这些组件可能会进行额外的重新渲染。可能会导致性能问题，所以不推荐，但是该方式也可以传递参数<div class="language-js extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br></div><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Button</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token comment">// 定义事件触发的回调函数</span>
  <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'Hello,Seven'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleClick</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>click me<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul></li></ol></li></ul> <ol start="4"><li>向事件处理函数中传递参数<br>
有两种方式可以在事件触发的函数中传递参数：
<ol><li>在事件的回调函数中进行显式调用 <code>bind()</code> 方法可以额外的传递参数</li> <li>在事件的回调函数中使用箭头函数</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">deleteRow</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span>e<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">deleteRow</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>id<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
</code></pre></div>这两种情况，React的事件对象 <code>e</code> 会被当做第二个参数传递。不同的是，箭头函数的方式事件对象必须显式传递，而 <code>bind()</code> 则可以进行隐式传递。</li></ol> <h2 id="_5-state"><a href="#_5-state" class="header-anchor">#</a> 5. State</h2> <p>不管是父组件或是子组件都无法知道某个组件是有状态的还是无状态的，并且它们也并不关心它是函数组件还是 class 组件。<br>
所以 <strong><code>State</code> 是组件的局部状态</strong>，它与 <code>props</code> 类似，但是 <strong><code>state</code> 是私有的，并且完全受控于当前组件，其他组件无权访问</strong>。</p> <h3 id="_1-class组件的构造函数-是唯一可以初始化-state-的地方"><a href="#_1-class组件的构造函数-是唯一可以初始化-state-的地方" class="header-anchor">#</a> 1. class组件的构造函数 是唯一可以初始化 <code>state</code> 的地方</h3> <div class="language-js extra-class"><div class="highlight-lines"><br><div class="highlighted"> </div><br><br><br><div class="highlighted"> </div><br><br><br><br><br></div><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">MyComponent</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 状态初始化</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      name<span class="token operator">:</span> <span class="token string">'Seven'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_2-setstate-是唯一修改-state-的方法"><a href="#_2-setstate-是唯一修改-state-的方法" class="header-anchor">#</a> 2. <code>setState()</code> 是唯一修改 <code>state</code> 的方法</h3> <div class="language-js extra-class"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><br><br><br></div><pre class="language-js"><code><span class="token comment">// 错误 不能直接修改 `state`</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'SSeven'</span><span class="token punctuation">;</span>
<span class="token comment">// 正确</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'SSeven'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><ul><li><strong>注意</strong>：<code>setState()</code> 进行的是浅合并</li></ul> <h3 id="_3-setstate-是异步的"><a href="#_3-setstate-是异步的" class="header-anchor">#</a> 3. <code>setState()</code> 是异步的</h3> <p>出于性能考虑，React 可能会把多个 <code>setState()</code> 调用合并成一个调用。因为 <code>this.props</code> 和 <code>this.state</code> 可能会异步更新，所以不要依赖他们的值来更新下一个状态。如下：</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token function-variable function">handleClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      msg<span class="token operator">:</span> <span class="token string">'哈哈'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token comment">// 在setState()之后立即使用状态，可能会获取不到预期的结果，因为setState()是异步的</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><img src="https://i.loli.net/2020/09/03/liqAkdnyBwgHKE5.gif" alt="setState()shi异步的"></p> <h3 id="_4-向-setstate-传递一个函数解决异步问题"><a href="#_4-向-setstate-传递一个函数解决异步问题" class="header-anchor">#</a> 4. 向 <code>setState()</code> 传递一个函数解决异步问题</h3> <p>要解决 <code>setState()</code> 异步的问题，可以让 <code>setState()</code> 接收一个函数而不是一个对象。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  counter<span class="token operator">:</span> state<span class="token punctuation">.</span>counter <span class="token operator">+</span> props<span class="token punctuation">.</span>increment
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="_5-单向数据流"><a href="#_5-单向数据流" class="header-anchor">#</a> 5. 单向数据流</h3> <blockquote><p>如果你把一个以组件构成的树想象成一个 props 的数据瀑布的话，那么每一个组件的 state 就像是在任意一点上给瀑布增加额外的水源，但是它只能向下流动。</p></blockquote> <p>所以任何的 <code>state</code> 总是所属于特定的组件，而且从该 <code>state</code> 派生的任何数据或 UI 只能影响树中“低于”它们的组件，无法影响处于“上游”的组件（也就是其父组件）。<br> <strong>归根结底，<code>props</code> 是用来传导数据的，而 <code>state</code> 是数据改变的源泉</strong></p> <h2 id="_6-条件渲染"><a href="#_6-条件渲染" class="header-anchor">#</a> 6. 条件渲染</h2> <h3 id="_1-与vue的差异"><a href="#_1-与vue的差异" class="header-anchor">#</a> 1. 与Vue的差异</h3> <p>Vue中的条件渲染是由 <code>v-if</code> 指令来完成的，这种内置的语法糖，使用起来会很方便。<br>
在React中，条件渲染更像是原生的条件判断。因为<a href="https://zh-hans.reactjs.org/docs/introducing-jsx.html#jsx-is-an-expression-too" target="_blank" rel="noopener noreferrer">JSX也是一个表达式<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，这一点就会非常灵活，也就是说可以将一个UI组件赋值给一个变量，可以当做一个参数，也可以作为函数的返回值。这就可以使用JS中的 <code>if</code> 语句或者 三目运算 来创建不通的组件表现当前的状态，然后让React根据它们来更新UI。</p> <blockquote><p>在 React 中，你可以创建不同的组件来封装各种你需要的行为。然后，依据应用的不同状态，你可以只渲染对应状态下的部分内容。</p></blockquote> <h3 id="_2-使用判断语句进行条件渲染"><a href="#_2-使用判断语句进行条件渲染" class="header-anchor">#</a> 2. 使用判断语句进行条件渲染</h3> <div class="language-js extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br><br></div><pre class="language-js"><code><span class="token keyword">const</span> Hello <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">Seven</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Hello<span class="token punctuation">,</span> Seven<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span><span class="token punctuation">,</span>
  <span class="token function-variable function">World</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Hello<span class="token punctuation">,</span> React<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">HelloComponent</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> name <span class="token operator">=</span> props<span class="token punctuation">.</span>name<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>name <span class="token operator">===</span> <span class="token string">'seven'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>Hello<span class="token punctuation">.</span>Seven <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>Hello<span class="token punctuation">.</span>World <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token punctuation">}</span>

ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>HelloComponent name<span class="token operator">=</span><span class="token string">'seven'</span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>要灵活运用 <strong>JSX也是一个表达式</strong> 这一特点，可以在三目运算和短路操作等JS中常用的判断方法，来实现React组件的动态渲染。例如，用三目运算对上例稍微修改：</p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><div class="highlighted"> </div><br><br></div><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">HelloComponent</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> name <span class="token operator">=</span> props<span class="token punctuation">.</span>name<span class="token punctuation">;</span>
  <span class="token keyword">return</span> name <span class="token operator">===</span> <span class="token string">'seven'</span> <span class="token operator">?</span> <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Hello<span class="token punctuation">,</span> Seven<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span> <span class="token operator">:</span> <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Hello<span class="token punctuation">,</span> React<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_7-列表渲染和key"><a href="#_7-列表渲染和key" class="header-anchor">#</a> 7. 列表渲染和key</h2> <h3 id="_1-与vue的差异-2"><a href="#_1-与vue的差异-2" class="header-anchor">#</a> 1. 与Vue的差异</h3> <p>Vue中的列表渲染同样是由一个语法糖 <code>v-for</code> 指令来完成的。<br>
React则使用了更为原生的语法，在JS中一般使用 <code>map()</code> 函数来完成数组的操作，并返回一个新的数组。在React中，把数组转化为元素列表的过程跟这个很相似。React中的列表渲染也是由 <code>map()</code> 函数来完成的。</p> <h3 id="_2-渲染列表组件"><a href="#_2-渲染列表组件" class="header-anchor">#</a> 2. 渲染列表组件</h3> <div class="language-js extra-class"><div class="highlight-lines"><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br></div><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">List</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> numbers <span class="token operator">=</span> props<span class="token punctuation">.</span>numbers<span class="token punctuation">;</span>
  <span class="token keyword">const</span> ListItem <span class="token operator">=</span> numbers<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">number<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token operator">&lt;</span>li key<span class="token operator">=</span><span class="token punctuation">{</span>number<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>number<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span><span class="token punctuation">{</span>ListItem<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> List<span class="token punctuation">;</span>
</code></pre></div><div class="custom-block warning"><p class="custom-block-title">列表渲染注意</p> <p>React列表的渲染也需要像Vue一样，<strong>在同级元素中使用唯一的 <code>key</code> 来当做元素的标识</strong>，因为两者都使用的虚拟DOM，使用 <code>key</code> 来进行标记，可以快速的进行diff操作，进行视图更新</p></div> <h3 id="_3-key的就进原则和唯一原则"><a href="#_3-key的就进原则和唯一原则" class="header-anchor">#</a> 3. key的就进原则和唯一原则</h3> <div class="language-js extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br></div><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Item</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token comment">// 错误！不需要在这里这里指定 key：</span>
    <span class="token operator">&lt;</span>li key<span class="token operator">=</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>number<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>number<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> numbers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">// React 列表渲染 demo</span>
<span class="token keyword">function</span> <span class="token function">List</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span>
      <span class="token punctuation">{</span>
        numbers<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
          <span class="token punctuation">{</span><span class="token comment">/* 正确，应该在这里定义key */</span> <span class="token punctuation">}</span>
          <span class="token operator">&lt;</span>Item key<span class="token operator">=</span><span class="token punctuation">{</span>number<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
            number<span class="token operator">=</span><span class="token punctuation">{</span>number<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="custom-block warning"><p class="custom-block-title">key 使用原则</p> <ol><li>元素的 key 只有放在就近的数组上下文中才有意义。也就是离循环最近的位置</li> <li>key 只是在兄弟节点之间必须唯一</li> <li>key 不要当做 prop 在组件间传递</li></ol></div> <h2 id="_8-受控组件"><a href="#_8-受控组件" class="header-anchor">#</a> 8. 受控组件</h2> <h3 id="_1-什么是受控组件"><a href="#_1-什么是受控组件" class="header-anchor">#</a> 1. 什么是受控组件</h3> <p>受控组件常用于由表单元素构建的组件，如 <code>&lt;input&gt;</code>、<code>&lt;textarea&gt;</code>、<code>&lt;select&gt;</code>等，这些元素的特点是：有自己的状态值 <code>value</code> ，还有一个改变 <code>value</code> 的事件，通过用户的操作，进行 <code>value</code> 值的更新。<br>
组件也是类似，可以有自己的状态和更新状态的方法。</p> <ul><li>由自己来控制状态的组件称之为“非受控组件”，在外部是无法修改的。</li> <li>而<strong>受控组件，就是在组件外部可以修改组件内的状态</strong>。</li></ul> <p>对于表单元素来说，将表单自己维护的可变状态由React来控制的表单元素，就构成了受控组件。“受控”与“非受控”这两个概念，区别在于这个组件的状态是否可以被外部修改。除了表单元素，任何组件都可以构建成为一个受控组件。</p> <h3 id="_2-vue构建受控组件"><a href="#_2-vue构建受控组件" class="header-anchor">#</a> 2. Vue构建受控组件</h3> <p>在Vue中表单的处理都是通过 <code>v-model</code> 指令来完成的，它是一种“数据双向绑定”的模式，其实是将表单的值通过 <code>v-bind</code> 和表单的 <code>change</code> 事件进行了封装：当表单发生 <code>change</code> 事件的时候，调用函数去改变状态，当状态改变的时候，表单的值也会改变。如下是将 <code>v-model</code> 进行了“拆解”：</p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><br><br><div class="highlighted"> </div><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><br><br></div><pre class="language-js"><code><span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> <span class="token operator">:</span>value<span class="token operator">=</span><span class="token string">&quot;value&quot;</span> @change<span class="token operator">=</span><span class="token string">&quot;handleChange&quot;</span><span class="token operator">&gt;</span>
<span class="token operator">...</span>
<span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    value<span class="token operator">:</span> <span class="token string">&quot;test&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
methods<span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token function">handleChange</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_3-react构建受控组件"><a href="#_3-react构建受控组件" class="header-anchor">#</a> 3. React构建受控组件</h3> <p>React构建受控组件原理与Vue类似，在React中，这些可变的状态通常保存在父组件的 <code>state</code> 中，并且只能通过使用 <code>setState()</code> 来更新。<br>
分为两步：</p> <ol><li>将表单的 <code>value</code> 交由 <code>state</code> 控制</li> <li>编写 change 事件触发函数，在函数中使用 <code>setState()</code> 改变状态<div class="language-js extra-class"><div class="highlight-lines"><br><br><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br><br><br></div><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Input</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 第一步，将表单的 value 交由 state 控制</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      value<span class="token operator">:</span> <span class="token string">'test'</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>handleChange <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleChange</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 第二步，编写相关函数，通过changes事件处理 state 的突变</span>
  <span class="token function">handleChange</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      value<span class="token operator">:</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span>
        value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>value<span class="token punctuation">}</span>
        onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleChange<span class="token punctuation">}</span>
      <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ol> <h3 id="_4-表单的其他受控组件"><a href="#_4-表单的其他受控组件" class="header-anchor">#</a> 4. 表单的其他受控组件</h3> <ol><li><code>&lt;textarea&gt;</code><br>
HTML中的 <code>&lt;textarea&gt;</code> 是双标签，内容实在其之间的:<div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>textarea</span><span class="token punctuation">&gt;</span></span>Hello World<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>textarea</span><span class="token punctuation">&gt;</span></span>
</code></pre></div>在React中，其内容将由 <code>value</code> 属性来代替，这样使用 <code>&lt;textarea&gt;</code> 和 <code>&lt;input&gt;</code> 非常相似（此处忽略了函数的书写，参考input）：<div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>textarea value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>textareaValue<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre></div></li> <li><code>&lt;select&gt;</code><br>
HTML中的 <code>&lt;select&gt;</code> 标签用来创建下拉选项标签：<div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>grapefruit<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>葡萄柚<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>lime<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>酸橙<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">selected</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>coconut<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>椰子<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mango<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>芒果<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre></div>使用HTML的 <code>selected</code> 来设置选中项。在React中，是在根 <code>&lt;select&gt;</code> 标签上使用 <code>value</code> 属性，来设置选中项，这在受控组件中更为便捷，只需要跟标签中更新它即可（此处忽略了函数的书写，参考input）：<div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>select value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>selectedValue<span class="token punctuation">}</span>
  onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleSelectChange<span class="token punctuation">}</span><span class="token operator">&gt;</span>
  <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>selectList<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token operator">&lt;</span>option key<span class="token operator">=</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>id<span class="token punctuation">}</span> value<span class="token operator">=</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>id<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">&gt;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>select<span class="token operator">&gt;</span>
</code></pre></div><div class="custom-block warning"><p class="custom-block-title">注意</p> <p>React中的 <code>select</code> 同样支持多选，需要如下设置：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>select multiple<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span> value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span><span class="token string">'B'</span><span class="token punctuation">,</span> <span class="token string">'C'</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
</code></pre></div></div></li> <li>使用技巧<br>
在定义受控组件时，每个表单元素都要定义 <code>state</code> 突变的函数，当处理多个类似突变的时候，可以使用ES6的一些技巧，将相同逻辑的函数写在一个函数中，因为它们最终都是 <code>setState()</code> 来改变 <code>state</code>，只是改变了不同的 <code>state</code>，所以可以为每个表单元素添加 <code>name</code> 属性，并让处理函数根据 <code>e.target.name</code> 的值选择要改变的 <code>state</code>。<div class="language-js extra-class"><div class="highlight-lines"><br><br><div class="highlighted"> </div><br><div class="highlighted"> </div><br><br><br></div><pre class="language-js"><code><span class="token function">handleInputChange</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> target <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">;</span>
  <span class="token keyword">const</span> name <span class="token operator">=</span> target<span class="token punctuation">.</span>name<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token operator">:</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ol> <h3 id="_5-构建受控组件的必要性"><a href="#_5-构建受控组件的必要性" class="header-anchor">#</a> 5. 构建受控组件的必要性</h3> <p>构建受控组件是很有必要的，这样React的 <code>state</code> 可以成为唯一的数据源，每个 <code>state</code> 的突变都有一个相关的处理函数，解耦视图和数据的关系。<br>
一个设计得当的组件应该同时支持“受控”与“非受控”两种形式，即当开发者不控制组件属性时，组件自己管理状态，而当开发者控制组件属性时，组件该由属性控制。而开发一个复杂组件更需要注意这点，以避免只有部分属性受控，使其变成一个半受控组件。<br>
AntD里有很多这样的例子，参考<a href="https://antd-course.ulivz.com/goozth.html#%E5%8F%97%E6%8E%A7%E7%BB%84%E4%BB%B6" target="_blank" rel="noopener noreferrer">标签页组件 <code>Tabs</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 和<a href="https://antd-course.ulivz.com/goozth.html#%E5%8F%97%E6%8E%A7%E7%BB%84%E4%BB%B6" target="_blank" rel="noopener noreferrer">树形组件 <code>Tree</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 分别演示了“受控”和“非受控”两种状态的使用方法。</p> <h2 id="_9-状态提升"><a href="#_9-状态提升" class="header-anchor">#</a> 9. 状态提升</h2> <p><a href="https://codesandbox.io/s/reactstatepromote-e6dzy?fontsize=14&amp;hidenavigation=1&amp;theme=dark" target="_blank" rel="noopener noreferrer">查看状态提升Demo<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a><br>
在React中，没有计算属性，也没有数据的双向绑定，因为在React应用中，<strong>任何可变数据应当只有一个相对应的唯一“数据源”</strong>。</p> <blockquote><p><strong>当你遇到需要同时获取多个子组件数据，或者两个组件之间需要相互通讯的情况时，需要把子组件的 state 数据提升至其共同的父组件当中保存。之后父组件可以通过 props 将状态数据传递到子组件当中。这样应用当中所有组件的状态数据就能够更方便地同步共享了</strong>。</p></blockquote> <p>对于新手来说通常的做法是（老手完全可以根据经验来设计好这些组件）：</p> <ol><li>第一步，首先将<code>state</code>添加到需要渲染数据的组件中，构建出组件；</li> <li>第二步，然后，如果其他组件也需要这个<code>state</code>，那么就将它提升至这些组件最近的共同父组件中，如果有 <code>setState()</code> 逻辑也提升至该父组件中。使该<code>state</code>成为唯一的“数据源”，并形成一种自上而下的数据流；</li> <li>第三步，修改构建出的组件中的 <code>state</code> 为 <code>props</code>，并修改触发 <code>setState()</code> 函数的逻辑改由 <code>props</code> 来控制。</li></ol> <p>虽然这种提升 state 的方式相比较Vue中的双向绑定看起来较为复杂，但带来的好处是，更容易的排查问题。由于 <strong>“存在”于组件中的任何 state，仅有组件自己能修改它</strong>。</p> <div class="custom-block warning"><p class="custom-block-title">注意</p> <p>如果某些数据可以由 props 或 state 推导得出，那么它就不应该存在于 state 中私有化。</p></div> <h2 id="_10-react中的slot-组合"><a href="#_10-react中的slot-组合" class="header-anchor">#</a> 10. React中的slot-组合</h2> <p><a href="https://codesandbox.io/s/gracious-greider-u3nwe?fontsize=14&amp;hidenavigation=1&amp;theme=dark" target="_blank" rel="noopener noreferrer">查看组合Demo<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a><br>
虽然React官方文档说了，React 中没有“槽”的概念，但是借助Vue中的“插槽”概念来理解React 中的“组合”，确实更易理解一点😃。React中通过 <code>props</code> 来实现组合，<code>props</code> 的强大之处是可以传递任何东西，所以插槽中也可以插入组件。</p> <h3 id="_1-包含关系-默认插槽"><a href="#_1-包含关系-默认插槽" class="header-anchor">#</a> 1. 包含关系（默认插槽）</h3> <p>React使用 <code>props.children</code> 来定义默认插槽，使用时直接插入内容即可，同样可以在 <code>{}</code> 中使用判断来定义默认内容：</p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br></div><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">SlotComponent</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>默认插槽<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
      <span class="token punctuation">{</span><span class="token comment">/* 定义默认插槽，并设定默认内容 */</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>children <span class="token operator">||</span> <span class="token string">&quot;默认内容&quot;</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 其他组件中使用</span>
<span class="token keyword">function</span> <span class="token function">OtherComponent</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>SlotComponent<span class="token operator">&gt;</span>
      插入的内容，也可以插入其他组件
    <span class="token operator">&lt;</span>SlotComponent<span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_2-具名插槽"><a href="#_2-具名插槽" class="header-anchor">#</a> 2. 具名插槽</h3> <p>通过 <code>props.slotName</code> 的方式定义具名插槽</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">SlotComponent</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>section<span class="token operator">&gt;</span>
      <span class="token punctuation">{</span><span class="token comment">/* props. 的方式定义”插槽“名 */</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>title<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
      <span class="token punctuation">{</span><span class="token comment">/* props.children 表示的为默认”插槽“，同样可以设置默认内容 */</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;content&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>children <span class="token operator">||</span> <span class="token string">&quot;默认内容&quot;</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>footer<span class="token operator">&gt;</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>footer<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>footer<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>section<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">OtherComponent</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token comment">// 往”插槽“中插入内容，包括组件</span>
      <span class="token operator">&lt;</span>SlotComponent title<span class="token operator">=</span><span class="token string">&quot;标题内容&quot;</span> footer<span class="token operator">=</span><span class="token string">&quot;底部内容&quot;</span><span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token operator">&lt;</span>Content <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>SlotComponent<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_11-组件生命周期"><a href="#_11-组件生命周期" class="header-anchor">#</a> 11. 组件生命周期</h2> <h3 id="_1-定义-class-组件"><a href="#_1-定义-class-组件" class="header-anchor">#</a> 1. 定义 class 组件<h4 id="class组件进阶"></h4></h3> <ul><li>定义 class 组件，需要继承 <code>React.Component</code> ；(关于类 <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Classes" target="_blank" rel="noopener noreferrer">class<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>和继承(创建子类) <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Classes/extends" target="_blank" rel="noopener noreferrer">extends<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>)</li> <li>在继承的子类中，必须定义一个 <a href="https://zh-hans.reactjs.org/docs/react-component.html#render" target="_blank" rel="noopener noreferrer"><code>render()</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 函数，这是 class 组件唯一必须实现的方法。</li></ul> <div class="language-js extra-class"><div class="highlight-lines"><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br><br></div><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Welcome</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span> Hello<span class="token punctuation">,</span> React<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>只有在 class 组件中才能使用生命周期函数。</p> <h3 id="_2-生命周期阶段"><a href="#_2-生命周期阶段" class="header-anchor">#</a> 2. 生命周期阶段</h3> <div class="img-wrapper"><img src="https://i.loli.net/2020/03/01/5nwEBkXuTy1deNq.png" alt="React 组件生命周期图" class="zoom-img"> <p>React 组件生命周期图</p></div> <p><a href="http://projects.wojtekmaj.pl/react-lifecycle-methods-diagram/" target="_blank" rel="noopener noreferrer">React 组件完整的生命周期<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。<br>
加粗标记的为常用的方法。</p> <ol><li><strong>挂载阶段</strong><br>
当组件实例被创建并插入 DOM 中时，其生命周期调用顺序如下:
<ul><li><a href="https://zh-hans.reactjs.org/docs/react-component.html#constructor" target="_blank" rel="noopener noreferrer"><strong><code>constructor()</code></strong><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Classes/constructor" target="_blank" rel="noopener noreferrer">构造函数<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><code>static getDervivedStateFromProps()</code></li> <li><a href="https://zh-hans.reactjs.org/docs/react-component.html#render" target="_blank" rel="noopener noreferrer"><strong><code>render()</code></strong><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，渲染函数</li> <li><a href="https://zh-hans.reactjs.org/docs/react-component.html#componentdidmount" target="_blank" rel="noopener noreferrer"><strong><code>componentDidMount()</code></strong><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，可以在此进行请求的处理。</li></ul></li> <li><strong>更新阶段</strong><br>
当组件的 props 或 state 发生变化时会触发更新。组件更新的生命周期调用顺序如下：
<ul><li><code>static getDerivedStateFromProps()</code></li> <li><a href="https://zh-hans.reactjs.org/docs/react-component.html#shouldcomponentupdate" target="_blank" rel="noopener noreferrer"><strong><code>shouldComponentUpdate()</code></strong><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，此方法仅作为性能优化的方式而存在</li> <li><a href="https://zh-hans.reactjs.org/docs/react-component.html#render" target="_blank" rel="noopener noreferrer"><strong><code>render()</code></strong><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，渲染函数</li> <li><code>getSnapshotBeforeUpdate()</code></li> <li><a href="https://zh-hans.reactjs.org/docs/react-component.html#componentdidupdate" target="_blank" rel="noopener noreferrer"><strong><code>componentDidUpdate()</code></strong><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li> <li><strong>卸载阶段</strong><br>
当组件从 DOM 中移除时会调用如下方法：
<ul><li><a href="https://zh-hans.reactjs.org/docs/react-component.html#componentwillunmount" target="_blank" rel="noopener noreferrer"><strong><code>componentWillUnMount()</code></strong><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li> <li><strong>错误处理</strong><br>
当渲染过程，生命周期，或子组件的构造函数中抛出错误时，会调用如下方法:
<ul><li><code>static getDerivedStateFromError()</code></li> <li><code>componentDidCatch()</code></li></ul></li></ol> <h2 id="_12-样式相关"><a href="#_12-样式相关" class="header-anchor">#</a> 12. 样式相关</h2> <h3 id="_1-为组件添加-class"><a href="#_1-为组件添加-class" class="header-anchor">#</a> 1. 为组件添加 class</h3> <ol><li><p>最简单的使用CSS的class是通过传递一个字符串作为 <code>className</code> 的属性即可：</p> <div class="language-jsx extra-class"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br><br><div class="highlighted"> </div><br><br></div><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token string">'styles.css'</span><span class="token punctuation">;</span> <span class="token comment">// 引入样式文件</span>

<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>box<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">}</span>

<span class="token comment">// 也可以传入一个表达式，如下这种类名依赖组件的 state 或 props 的情况也很常见</span>
<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> className <span class="token operator">=</span> <span class="token string">&quot;menu&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>isActive<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    className <span class="token operator">+=</span> <span class="token string">&quot; menu-active&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>className<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">menu</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>CSS作用域<br>
在react中的css样式并没有像Vue一样提供“作用域(scoped)”的，也就是说它是全局的，这会带来很多问题：</p> <ul><li>全局污染</li> <li>命名混乱</li> <li>依赖关系复杂</li> <li>无法共享变量</li> <li>代码冗余，难维护</li></ul> <p>React为解决上述问题提供了很多解决方案，包括CSS-in-JS，CSS-module等，在<a href="https://create-react-app.dev/docs/adding-a-css-modules-stylesheet" target="_blank" rel="noopener noreferrer"><code>create-react-app</code>脚手架工具中内置了<code>CSS-module</code>方案<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，关于在<code>create-react-app</code>中使用<code>CSS-module</code>的方式看<a href="https://juejin.im/post/6844903760867786759" target="_blank" rel="noopener noreferrer">这里<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，这里简单说下使用<code>**.module.css</code>后缀名的形式（这也是官方文档里的方式）来实现：</p> <div class="language-jsx extra-class"><div class="highlight-lines"><br><div class="highlighted"> </div><br><br><br><br><br><div class="highlighted"> </div><br><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br><br></div><pre class="language-jsx"><code><span class="token comment">// 首先样式文件的后缀名要统一修改为 .module.css/sass/scss 的形式，然后在组件中引入文件</span>
<span class="token keyword">import</span> styles <span class="token keyword">from</span> <span class="token string">'styles.modules.css'</span><span class="token punctuation">;</span>

<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token punctuation">{</span><span class="token comment">/* 像使用一个变量一样使用样式 */</span><span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>box<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">test</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token punctuation">{</span><span class="token comment">/* 多个混合样式名 */</span><span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span>style<span class="token punctuation">.</span>box<span class="token punctuation">,</span> <span class="token string">'title'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">test</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>style<span class="token punctuation">.</span>box <span class="token operator">+</span> <span class="token string">' title'</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">test</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>在<code>CSS-module</code>中定义全局变量，可以使用<code>:global(className)</code>包括即可<div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">:global(.test)</span> <span class="token punctuation">{</span>
  <span class="token property">font-style</span><span class="token punctuation">:</span> italic<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul></li></ol> <h3 id="_2-行内样式"><a href="#_2-行内样式" class="header-anchor">#</a> 2. 行内样式</h3> <p><strong>注意</strong>：React 并不推荐使用行内样式，因为从性能角度来讲， CSS 的 class 通常会比行内样式更好。<br> <code>style</code> 在 React 应用中都用于<strong>在渲染过程中添加动态计算的样式</strong>。所以需要使用js的方式来设置，使用 <code>{}</code> 包裹一个对象的方式。<br> <code>style</code> 定义方式有两种：</p> <ol><li>接受一个采用 <em>小驼峰(camelCase)</em> 命名属性的JS对象，而不是 CSS 字符串。这与 DOM 中 <code>style</code> 的 JS 属性是一致的(例如：<code>node.style.backgroundImage</code>)，同时也会更高效，且能预防跨站脚本（XSS）的安全漏洞。如:<div class="language-js extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><div class="highlighted"> </div><br><br></div><pre class="language-js"><code><span class="token keyword">const</span> divStyle <span class="token operator">=</span> <span class="token punctuation">{</span>
  color<span class="token operator">:</span> <span class="token string">'blue'</span><span class="token punctuation">,</span>
  backgroundImage<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">url(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>imgUrl<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
  <span class="token comment">// 注意：样式不会自动补齐前缀。如果需要做兼容性hack</span>
  WebkitTransition<span class="token operator">:</span> <span class="token string">'all'</span><span class="token punctuation">,</span> <span class="token comment">// 这里的 W 要大写</span>
  msTransition<span class="token operator">:</span> <span class="token string">'all'</span> <span class="token comment">// 只有 'ms' 是需要小写的 </span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">Welcome</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span>divStyle<span class="token punctuation">}</span><span class="token operator">&gt;</span>Hello React<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li>直接在表达式中用对象的方式定义行内样式<div class="language-js extra-class"><div class="highlight-lines"><br><div class="highlighted"> </div><br><br><br><div class="highlighted"> </div><br><br><br></div><pre class="language-js"><code><span class="token comment">// 可以省略 px 单位</span>
<span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> color<span class="token operator">:</span> <span class="token string">'blue'</span><span class="token punctuation">,</span> height<span class="token operator">:</span> <span class="token number">10</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
  Hello React
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token comment">// 如果是其他单位则不能省略</span>
<span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> height<span class="token operator">:</span> <span class="token string">&quot;10%&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
  Hello React
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
</code></pre></div></li></ol></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">更新时间:</span> <span class="time">12/1/2020, 4:35:44 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/web/Vue/vue-cli3.html" class="prev">
        vue-cli3相关
      </a></span> <span class="next"><a href="/web/React/如何开发React应用.html">
        如何开发React应用
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.8fcb3c07.js" defer></script><script src="/assets/js/2.ea4b5fde.js" defer></script><script src="/assets/js/23.17047d1d.js" defer></script><script src="/assets/js/3.482fc7d1.js" defer></script>
  </body>
</html>
