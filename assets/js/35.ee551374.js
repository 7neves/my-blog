(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{392:function(t,s,a){"use strict";a.r(s);var n=a(42),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"vue-cli3配置相关"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vue-cli3配置相关"}},[t._v("#")]),t._v(" vue-cli3配置相关")]),t._v(" "),a("p",[t._v("vue-cli3中对"),a("a",{attrs:{href:"https://cli.vuejs.org/zh/guide/webpack.html#webpack-%E7%9B%B8%E5%85%B3",target:"_blank",rel:"noopener noreferrer"}},[t._v("webpack的配置"),a("OutboundLink")],1),t._v("有两种，所以以下配置基本都会有两种配置方式，自行选择")]),t._v(" "),a("ul",[a("li",[t._v("高级的链式配置"),a("a",{attrs:{href:"https://cli.vuejs.org/zh/guide/webpack.html#%E9%93%BE%E5%BC%8F%E6%93%8D%E4%BD%9C-%E9%AB%98%E7%BA%A7",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("chainWebpack")]),a("OutboundLink")],1)]),t._v(" "),a("li",[t._v("简单的配置"),a("a",{attrs:{href:"https://cli.vuejs.org/zh/guide/webpack.html#%E7%AE%80%E5%8D%95%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%B9%E5%BC%8F",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("configureWebpack")]),a("OutboundLink")],1)])]),t._v(" "),a("h3",{attrs:{id:"_1-配置gzip压缩"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-配置gzip压缩"}},[t._v("#")]),t._v(" 1. 配置Gzip压缩")]),t._v(" "),a("p",[t._v("使用插件"),a("code",[t._v("compression-webpack-plugin")]),t._v("插件来实现Gzip压缩")]),t._v(" "),a("ol",[a("li",[t._v("安装插件")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("cnpm i "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("D")]),t._v(" compression"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("webpack"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("plugin\n")])])]),a("p",[t._v("2.1 使用高级链式配置"),a("code",[t._v("chainWebpack")]),t._v("实现方法：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("export "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 链式配置")]),t._v("\n  chainWebpack "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("process"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NODE_ENV")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'production'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// gzip压缩，如果本地不开启，则需要在Nginx端开启")]),t._v("\n      config\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("plugin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'compression-webpack-plugin'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("compressionPlugin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          test"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token regex"}},[a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("\\.js$|\\.html$|\\.css$|\\.png")]),a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 需要压缩的文件")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          threshold"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10240")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 阈值，大于此值的文件都会被压缩")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          deleteOriginalAssets"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 是否删除原未压缩文件(经测设置为true并未删除)")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("2.2 使用简单的配置"),a("code",[t._v("configureWebpack")]),t._v("来实现，"),a("a",{attrs:{href:"https://www.cnblogs.com/yangshifu/p/9724709.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("参考"),a("OutboundLink")],1)]),t._v(" "),a("h3",{attrs:{id:"_2-配置打包分析插件webpack-bundle-analyze"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-配置打包分析插件webpack-bundle-analyze"}},[t._v("#")]),t._v(" 2. 配置打包分析插件"),a("code",[t._v("webpack-bundle-analyze")])]),t._v(" "),a("p",[a("code",[t._v("webpack-bundle-analyze")]),t._v(" 插件可以提供一个可视化的图形界面展示打包后各个文件的依赖关系，以便对各个文件进行分析，进行进一步打包优化。\n在vue-cli2中已经内置了该插件的配置，开箱即用，但是在vue-cli3中需要进行手动配置。")]),t._v(" "),a("ul",[a("li",[t._v("简单的配置方式："),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("configureWebpack")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("config")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 配置打包概览插件")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("process"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NODE_ENV")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'production'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("process"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("npm_config_report"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        plugins"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BundleAnalyzer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])])])]),t._v(" "),a("li",[t._v("高级的链式操作配置方式："),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 高级的webpack配置")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("chainWebpack")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("config")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 配置打包分析插件，以便使用 npm run build --report 对包进行分析优化")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("process"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NODE_ENV")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'production'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("process"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("npm_config_report"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      config\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("plugin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'webpack-bundle-analyzer'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'webpack-bundle-analyzer'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("BundleAnalyzerPlugin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])])])]),t._v(" "),a("li",[a("strong",[t._v("出现问题的点")]),t._v("：不用再另行配置 "),a("code",[t._v("package.json")]),t._v("文件中的 "),a("code",[t._v("scripts")]),t._v("，直接执行命令"),a("code",[t._v("npm run build --report")]),t._v("就会输出分析页面，执行"),a("code",[t._v("npm run build")]),t._v("将不会输出。")])]),t._v(" "),a("h3",{attrs:{id:"_3-静态资源的处理和vue-cli3中的环境变量"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-静态资源的处理和vue-cli3中的环境变量"}},[t._v("#")]),t._v(" 3. 静态资源的处理和vue-cli3中的环境变量")]),t._v(" "),a("p",[t._v("本文参考"),a("a",{attrs:{href:"https://www.jb51.net/article/147558.htm",target:"_blank",rel:"noopener noreferrer"}},[t._v("Vue CLI3搭建的项目中路径相关问题的解决"),a("OutboundLink")],1),t._v(" ，进行了重新排版和总结"),a("br"),t._v("\n项目中的静态资源通常通过这两种方式进行处理:")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("不会被 webpack 处理的，将会直接被拷贝：")]),t._v(" "),a("ul",[a("li",[t._v("放置在 "),a("code",[t._v("public/")]),t._v(" 目录下，"),a("strong",[t._v("即使未被使用")]),t._v("。")]),t._v(" "),a("li",[t._v("通过绝对路径被引用的文件，即以 "),a("code",[t._v("/")]),t._v(" 开头引用的文件资源（如"),a("code",[t._v("/images/test.png")]),t._v("），因为绝对路径在打包时会被保留不变，如果文件被处理，将会404。")])])]),t._v(" "),a("li",[a("p",[t._v("会被 webpack 处理（URL或静态资源的 "),a("code",[t._v("resolve")]),t._v("、"),a("code",[t._v("minify")]),t._v("、"),a("code",[t._v("uglify")]),t._v("、"),a("code",[t._v("转 base64")]),t._v(" 等处理方式）：")]),t._v(" "),a("ul",[a("li",[t._v("使用 JavaScript 导入("),a("code",[t._v("require")]),t._v("、"),a("code",[t._v("import")]),t._v("等方式)的文件。")]),t._v(" "),a("li",[t._v("在 "),a("code",[t._v("template")]),t._v("、"),a("code",[t._v("CSS")]),t._v(" 中通过相对路径（即以 "),a("code",[t._v(".")]),t._v(" 开头）被引用。")]),t._v(" "),a("li",[t._v("URL 以 "),a("code",[t._v("~")]),t._v(" 开头，其后的任何内容都会作为一个模块请求被解析。")]),t._v(" "),a("li",[t._v("URL 以 "),a("code",[t._v("@")]),t._v(" 开头，它也会作为一个模块请求被解析（"),a("code",[t._v("@")]),t._v(" 是在 webpack 设置的 "),a("code",[t._v("alias")]),t._v("）。")])]),t._v(" "),a("p",[t._v("应该根据实际情况去选择要引用的资源是否要被处理，然后用对应的、正确的方式去引用它们以达到目的。需要被webpack处理的方式比较容易，直接使用上述方式即可，主要说下在什么情况下不需要webpack处理，以及绝对路径的一些使用方式，其中还涉及到了环境变量的一些使用："),a("br"),t._v("\n不需要 webpack 处理的文件，分两种情况：")]),t._v(" "),a("ul",[a("li",[t._v("先来看看哪些文件需要放在 "),a("code",[t._v("public/")]),t._v(" 目录下\n"),a("ul",[a("li",[t._v("项目中会有大量的图片或图片质量很高(单个图片文件很大)时"),a("br"),t._v("\n因为webpack会将图片处理为"),a("code",[t._v("base64")]),t._v("，而这些base64的编码会被放入js文件中，当渲染页面的时候渲染出来；base64编码的长度("),a("a",{attrs:{href:"https://segmentfault.com/q/1010000000456088",target:"_blank",rel:"noopener noreferrer"}},[t._v("处理原理"),a("OutboundLink")],1),t._v(")是根据图片大小来定的：\n"),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center"}},[t._v("图片大小")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("base64编码长度")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("2.5KB")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("3420个字符")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("58KB")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("12726个字符")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("562KB")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("767644个字符")])])])]),t._v("\n再看下打包后文件的大小：\n"),a("img-show",{attrs:{"img-info":{src:"https://i.loli.net/2019/11/05/oH5m6lFDZfVnw79.png",description:"打包2.5KB的图片"}}}),t._v(" "),a("img-show",{attrs:{"img-info":{src:"https://i.loli.net/2019/11/05/W5mcONpZqHhEP8z.jpg",description:"打包562KB的图片"}}}),t._v("\n可以看到打包文件大小差异非常大，所以图片的处理，图片的大小和数量决定了存放的位置。个人建议图片的处理方式如下，优先级从上往下递减：\n"),a("ul",[a("li",[t._v("小的icon图片，"),a("a",{attrs:{href:"https://www.iconfont.cn/help/detail?spm=a313x.7781069.1998910419.d8d11a391&helptype=code",target:"_blank",rel:"noopener noreferrer"}},[t._v("制作成iconfont"),a("OutboundLink")],1),t._v("，以字体图标的方式引入使用")]),t._v(" "),a("li",[t._v("较小(少)的(<=6KB)无法制作成iconfont字体图标的通过webpack来处理")]),t._v(" "),a("li",[t._v("较大(多)的图片放入"),a("code",[t._v("public/")]),t._v("文件中直接拷贝处理(可以考虑CSSSprite的方式，进而减少请求数量)，通过绝对路径来引入")])])],1),t._v(" "),a("li",[t._v("与webpack不兼容，无法通过NPM等包管理工具来管理的第三方库文件，只能通过script标签（绝对路径）的方式引入")])])]),t._v(" "),a("li",[t._v("再来看看什么情况下需要使用绝对路径，和使用绝对路径需要注意的一些问题\n"),a("ul",[a("li",[a("p",[t._v("使用场景：上文说了，绝对路径会被保留，"),a("code",[t._v("public/")]),t._v("目录会被直接拷贝；所以通常"),a("strong",[t._v("引用"),a("code",[t._v("public/")]),t._v("目录下的文件时会使用绝对路径")]),t._v("。")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("注意：使用绝对路径引入文件时一定要确保使用 "),a("a",{attrs:{href:"https://cli.vuejs.org/zh/config/#publicpath",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("baseUrl")]),t._v("（从 Vue CLI 3.3 起已弃用，请使用 "),a("code",[t._v("publicPath")]),t._v(" ）"),a("OutboundLink")],1),t._v(" 的值作为 URL 的开头")]),t._v("，因为：")]),t._v(" "),a("blockquote",[a("p",[t._v("默认情况下，Vue CLI 会假设你的应用是被部署在一个域名的根路径上，例如 https://www.my-app.com/。如果应用被部署在一个子路径上，你就需要用这个选项指定这个子路径。例如，如果你的应用被部署在 https://www.my-app.com/my-app/，则设置 publicPath 为 /my-app/。")])])]),t._v(" "),a("li",[a("p",[t._v("使用方法："),a("br"),t._v("\n从注意事项中了解到绝对路径的使用其实主要是 "),a("code",[t._v("publicPath")]),t._v(" 的使用，所以需要重点了解"),a("code",[t._v("publicPath")]),t._v("；而该值与"),a("a",{attrs:{href:"https://cli.vuejs.org/zh/guide/mode-and-env.html#%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E5%92%8C%E6%A8%A1%E5%BC%8F",target:"_blank",rel:"noopener noreferrer"}},[t._v("环境变量"),a("OutboundLink")],1),t._v("有很大的关系：")]),t._v(" "),a("blockquote",[a("p",[t._v("BASE_URL - 会和 vue.config.js 中的 publicPath 选项相符，即你的应用会部署到的基础路径。")])]),t._v(" "),a("p",[t._v("所以如何使用绝对路径的问题，也就变成了如何使用"),a("code",[t._v("BASE_URL")]),t._v("这个环境变量的问题")]),t._v(" "),a("ul",[a("li",[t._v("在.html模板文件中使用"),a("br"),t._v("\n借助 lodash template 使用"),a("a",{attrs:{href:"https://cli.vuejs.org/zh/guide/html-and-static-assets.html#%E6%8F%92%E5%80%BC",target:"_blank",rel:"noopener noreferrer"}},[t._v("插值"),a("OutboundLink")],1),t._v("的方式插入这个变量："),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("link rel"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"icon"')]),t._v(" href"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"<%= BASE_URL %>favicon.ico"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])])]),t._v(" "),a("li",[t._v("在组件中使用"),a("br"),t._v("\n首先，来看两个“工具”："),a("a",{attrs:{href:"http://nodejs.cn/api/process.html#process_process_env",target:"_blank",rel:"noopener noreferrer"}},[t._v("node中的process.env属性"),a("OutboundLink")],1),t._v("，它可以获取用户环境的对象；webpack的"),a("a",{attrs:{href:"https://www.webpackjs.com/plugins/define-plugin/#%E7%94%A8%E6%B3%95",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("DefinePlugin")]),a("OutboundLink")],1),t._v("插件，它可以创建一个在编译时可以配置的全局常量，因此我们可以使用该插件来为"),a("code",[t._v("process.env")]),t._v("对象添加一个变量，在不同环境下有不一样的值。通过"),a("code",[t._v("vue ui")]),t._v("可视化界面执行inspect任务，可以看到，在vue-cli3的默认配置中，已经通过"),a("code",[t._v("DefinePlugin")]),t._v("插件定义了"),a("code",[t._v("BASE_URL")]),t._v("环境变量：\n"),a("img-show",{attrs:{"img-info":{src:"https://i.loli.net/2019/11/05/Bt51FrwfPhgOvqC.png",description:"开发环境"}}}),t._v(" "),a("img-show",{attrs:{"img-info":{src:"https://i.loli.net/2019/11/05/Bt51FrwfPhgOvqC.png",description:"生产环境"}}}),t._v("\n所以在组件中，可以使用"),a("a",{attrs:{href:"https://cli.vuejs.org/zh/guide/mode-and-env.html#%E5%9C%A8%E5%AE%A2%E6%88%B7%E7%AB%AF%E4%BE%A7%E4%BB%A3%E7%A0%81%E4%B8%AD%E4%BD%BF%E7%94%A8%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F",target:"_blank",rel:"noopener noreferrer"}},[t._v("客户端侧使用环境变量的方式"),a("OutboundLink")],1),t._v("获取"),a("code",[t._v("BASE_URL")]),t._v("这个全局变量"),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("data")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    baseUrl"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" process"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("BASE_URL")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 局部使用")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 通常，通过定义全局变量的方式来使用")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Vue")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" process"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("BASE_URL")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),t._v("在模板中使用："),a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("app"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("img")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v(":src")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("`${baseUrl}imgs/my_image.png`"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])],1),t._v(" "),a("li",[t._v("在样式文件中使用（以Saas为例）\n因为样式文件中无法使用js中定义变量，也无法使用配置的环境变量，因此只能借助webpack配置，将环境变量“引入”样式文件中，作为样式中一个全局变量来使用。sass-loader提供了一个"),a("a",{attrs:{href:"https://webpack.docschina.org/loaders/sass-loader/#-%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F",target:"_blank",rel:"noopener noreferrer"}},[t._v("配置环境变量的data选项"),a("OutboundLink")],1),t._v("，vue-cli3的配置如下:"),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("css"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  loaderOptions"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    sass"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 定义全局变量$baseUrl，能根据环境不同动态切换基础路径")]),t._v("\n      data"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('$baseUrl: "')]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("process"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("BASE_URL")]),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('";')]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])])])])])])])]),t._v(" "),a("h3",{attrs:{id:"_4-使用-svg文件作为背景图片"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-使用-svg文件作为背景图片"}},[t._v("#")]),t._v(" 4. 使用"),a("code",[t._v(".svg")]),t._v("文件作为背景图片")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("问题")]),t._v("：在项目中将"),a("code",[t._v(".svg")]),t._v("的文件存放于 "),a("code",[t._v("./src/assets/images")]),t._v(" 目录下，使用会被webpack打包处理的引用方式："),a("code",[t._v('background-image: url("~@/assets/images/xxx.svg");')]),t._v("，本地开发环境能正常展示，打包后图片无法正常展示。通过观察打包目录发现，"),a("code",[t._v(".svg")]),t._v("文件被单独打包到静态资源下的 "),a("code",[t._v("img/")]),t._v(" 目录下，而未经过webpack处理。")]),t._v(" "),a("li",[a("strong",[t._v("解决问题")]),t._v("：猜想是默认配置问题，通过"),a("code",[t._v("vue ui")]),t._v("检查webpack配置，发现vue-cli3对"),a("code",[t._v(".svg")]),t._v("文件的处理方式如下：\n"),a("img-show",{attrs:{"img-info":{src:"https://i.loli.net/2019/11/05/NqfCF4PR5TuctaY.png",description:"默认配置"}}}),t._v("\n在vue-cli3默认的配置中，处理"),a("code",[t._v(".svg")]),t._v("文件的方式是添加hash值之后直接拷贝的，并不会压缩处理。\n"),a("ul",[a("li",[t._v("将"),a("code",[t._v(".svg")]),t._v("文件放在"),a("code",[t._v("public/")]),t._v("目录下，进行文件的直接拷贝，使用方式同引用"),a("code",[t._v("public/")]),t._v("目录下文件的方式一样")])])],1)]),t._v(" "),a("h2",{attrs:{id:"vue-cli3生态相关"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vue-cli3生态相关"}},[t._v("#")]),t._v(" vue-cli3生态相关")]),t._v(" "),a("h3",{attrs:{id:"_1-使用postcss-pxtorem"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-使用postcss-pxtorem"}},[t._v("#")]),t._v(" 1. 使用"),a("a",{attrs:{href:"https://www.npmjs.com/package/postcss-pxtorem",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("postcss-pxtorem")]),a("OutboundLink")],1)]),t._v(" "),a("blockquote",[a("p",[t._v("postcss-pxtorem是PostCSS的插件，用于将像素单元生成rem单位。")])]),t._v(" "),a("p",[t._v("在移动端的开发中，通常会使用"),a("code",[t._v("rem")]),t._v("单位进行开发，而设计稿的单位是 "),a("code",[t._v("px")]),t._v("，所以中间需要进行换算，使用 "),a("code",[t._v("postcss-pxtorem")]),t._v(" 能将"),a("code",[t._v("px")]),t._v("自动换算为"),a("code",[t._v("rem")]),t._v("，大大提高开发效率。")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("安装依赖：")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" postcss-pxtorem -D\n")])])])]),t._v(" "),a("li",[a("p",[t._v("设置规则（更改 "),a("code",[t._v("postcss.config.js")]),t._v(",该文件为使用vue-cli3自动创建的文件）")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  plugins"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'autoprefixer'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      overrideBrowserslist"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Android 4.1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"iOS 7.1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Chrome > 31"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ff > 31"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ie >= 8"')]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'postcss-pxtorem'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      rootValue"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//基准值，结果为：设计稿元素尺寸/16，比如元素宽320px,最终页面会换算成 20rem")]),t._v("\n      propList"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"*"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 能被转换的样式属性，*表示所有属性都能被转换")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[t._v("使用技巧：对不同的文件使用不同的 "),a("code",[t._v("rootValue")]),t._v(" 的值")]),t._v(" "),a("p",[t._v("在开发中使用了"),a("a",{attrs:{href:"https://youzan.github.io/vant/#/zh-CN/quickstart",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("vant")]),a("OutboundLink")],1),t._v("UI库，其使用的单位为px，为1X图（375），而现在设计图基本都为2X（750），在使用postcss-pxtorem插件转换rem时， 导致vant 组件样式过小，可以使用动态的rootValue，对其进行一个2倍的放大：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("exports")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" file "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" isVant "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" file "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" file"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dirname "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" file"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dirname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("indexOf")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vant"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" rootValue "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" isVant "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("37.5")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("75")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        plugins"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            autoprefixer"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"postcss-pxtorem"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                rootValue"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" rootValue"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                propList"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"*"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" \n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[t._v("使用技巧：匹配规则的巧用")]),t._v(" "),a("p",[t._v("通过设置"),a("code",[t._v("postcss-pxtorem")]),t._v("中的"),a("code",[t._v("propList")]),t._v("属性，可以进行样式的过滤：")]),t._v(" "),a("ul",[a("li",[t._v("使用"),a("code",[t._v("*")]),t._v("匹配所有属性，例如："),a("code",[t._v('propList: ["*"]')])]),t._v(" "),a("li",[t._v("在单词的前面或后面使用"),a("code",[t._v("*")]),t._v("，将会匹配到该包含该单词的属性："),a("code",[t._v('propList: ["*position*"]')]),t._v("将会匹配到"),a("code",[t._v("background-position")])]),t._v(" "),a("li",[t._v("使用"),a("code",[t._v("!")]),t._v("过滤不需要匹配的属性："),a("code",[t._v('propList: ["!border”]')]),t._v("表示不匹配所有的 "),a("code",[t._v("border")]),t._v(" 样式")]),t._v(" "),a("li",[t._v("可以组合使用："),a("code",[t._v('propList: ["*", "!border”, "!font*"]')]),t._v("表示不匹配所有样式，除了 "),a("code",[t._v("border")]),t._v(" 样式，以及包含"),a("code",[t._v("font")]),t._v("的样式")])])]),t._v(" "),a("li",[a("p",[t._v("使用技巧：在某个样式中忽略转换")]),t._v(" "),a("p",[t._v("有时候可能只是想在某一个样式中不需要进行转换，而不是所有样式，可以将 "),a("code",[t._v("px")]),t._v(" 单位大写："),a("code",[t._v("PX")]),t._v(" 或 "),a("code",[t._v("Px")]),t._v("：")]),t._v(" "),a("div",{staticClass:"language-css extra-class"},[a("pre",{pre:!0,attrs:{class:"language-css"}},[a("code",[a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("// 小写的 px 单位会被转换为 rem\n.convert")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("font-size")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 16px"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" // converted to 1rem\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n \n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("// 将 px 大写：PX 或 Px，则可以过滤掉该样式，而不会过滤掉所有：如下，只是过滤了 .ignore 的 border 和 border-width，而不会过滤掉 .no-ignore 类里的 border 和 border-width \n.ignore")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("border")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 1Px solid"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" // ignored\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("border-width")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 2PX"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" // ignored\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".other")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("border")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 1px solid"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" // converted \n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("border-width")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 2px"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" // converted \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[t._v("使用技巧：搭配"),a("code",[t._v("amfe-flexible")]),t._v("实现多种设备自适应")]),t._v(" "),a("p",[t._v("因为 "),a("code",[t._v("rem")]),t._v(" 为相对单位，相对于根元素的字体大小来的，如：html默认的font-size为16px，那么1.2rem就是16*2=32px。需要根据设备分辨率大小来动态改变根元素的大小，来进行自适应适配。使用 "),a("code",[t._v("amfe-flexible")]),t._v("来动态改变根元素字体大小，实现自适应。使用方法很简单：")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("安装")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" i -S amfe-flexible\n")])])])]),t._v(" "),a("li",[a("p",[t._v("使用：在main.js中导入即可")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'amfe-flexible'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])])])])])])}),[],!1,null,null,null);s.default=e.exports}}]);