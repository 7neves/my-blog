(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{395:function(e,t,r){"use strict";r.r(t);var o=r(42),v=Object(o.a)({},(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("h2",{attrs:{id:"_1-vue的响应式原理"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_1-vue的响应式原理"}},[e._v("#")]),e._v(" 1. Vue的响应式原理")]),e._v(" "),r("p",[e._v("Vue采用的是"),r("strong",[e._v("数据劫持")]),e._v("结合"),r("strong",[e._v("发布-订阅模式")]),e._v("；通过"),r("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty",target:"_blank",rel:"noopener noreferrer"}},[r("code",[e._v("Object.defineProperty()")]),r("OutboundLink")],1),e._v("来劫持各个属性的"),r("code",[e._v("getter")]),e._v("和"),r("code",[e._v("setter")]),e._v("，在数据变动时，发布消息给订阅者，触发相应的监听回调。"),r("br"),e._v("\n具体步骤："),r("br"),e._v("\n当创建Vue实例的时候，会遍历递归 "),r("code",[e._v("data")]),e._v(" 选项中的数据对象，利用 "),r("code",[e._v("Object.defineProperty()")]),e._v(" 为属性添加 "),r("code",[e._v("setter")]),e._v(" 和 "),r("code",[e._v("getter")]),e._v("，其中"),r("code",[e._v("getter")]),e._v("用来收集依赖，"),r("code",[e._v("setter")]),e._v("用来派发更新；每个组件实例都有 "),r("code",[e._v("watcher")]),e._v(" 实例，也就是订阅者，会在组件渲染的过程中记录依赖的所有数据属性，之后在依赖被改动时，就会触发"),r("code",[e._v("setter")]),e._v("，通知订阅者，派发更新，从而使关联的组件进行重新渲染。\n"),r("img-show",{attrs:{"img-info":{src:"https://i.loli.net/2020/02/10/TZaJeNXuPtj72km.png",description:"Vue追踪变化"}}})],1),e._v(" "),r("h2",{attrs:{id:"_2-vue3-0为什么采用了proxy-放弃了object-defineproperty"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_2-vue3-0为什么采用了proxy-放弃了object-defineproperty"}},[e._v("#")]),e._v(" 2. Vue3.0为什么采用了Proxy,放弃了"),r("code",[e._v("Object.defineProperty()")])]),e._v(" "),r("p",[r("code",[e._v("Object.defineProperty()")]),e._v("只能劫持对象的属性，因此需要对每个对象的每个属性进行遍历，Vue中通过递归的方式来实现对 data 对象的监控，如果属性值也是对象，那么就需要更深度的遍历；基于性能的问题，Vue放弃了"),r("code",[e._v("defineProperty")]),e._v("对数组下标变化监控的能力，而在内部改写了几个方法来监听数组。而"),r("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy",target:"_blank",rel:"noopener noreferrer"}},[r("code",[e._v("Proxy")]),r("OutboundLink")],1),e._v("对象，可以代理任何对象，包括原生数组、函数，并返回一个新的对象")]),e._v(" "),r("h2",{attrs:{id:"_3-vue内部那几个方法能实现数组的监听"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_3-vue内部那几个方法能实现数组的监听"}},[e._v("#")]),e._v(" 3. Vue内部那几个方法能实现数组的监听")]),e._v(" "),r("p",[r("code",[e._v("push()")]),e._v("、"),r("code",[e._v("pop()")]),e._v("、"),r("code",[e._v("splice()")]),e._v("、"),r("code",[e._v("shift()")]),e._v("、"),r("code",[e._v("unshift()")]),e._v("、"),r("code",[e._v("sort()")]),e._v("、"),r("code",[e._v("reverse()")])])])}),[],!1,null,null,null);t.default=v.exports}}]);